#### 1.cpp

1.cpp 内为基于多线程的多人聊天室，且实现了细粒度锁。

在服务端创建、客户端连接与客户端退出时，都会有相应的提示信息。

细粒度锁实现方法：为每个客户端创建创建消息队列，每个客户端的发送和接收消息由两个独立的线程分别管理，给某节点发送消息时往该节点的消息队列中添加元素，通过给对客户端消息队列的操作加互斥锁来替代给 `send()` 和 `recv()` 函数加锁。

#### 2.cpp

2.cpp 内为基于 IO 复用的多人聊天室。

在服务端创建、客户端连接与客户端退出时，都会有相应的提示信息。

大体思路：对于服务端，将服务端的 fd 也设置为非阻塞型，每一次 select 判断服务端是否被置位，是则说明有新的客户端建立了连接；对于客户端，如果客户端被置位，检查其 `recv()`返回值，返回值不为正，则表明该客户端退出，反之表明接收到消息。



注：对于单行长度超过 1000 字节（buffer 大小），即连续接收到 1000 个字符且其中没有换行符的情况，传输结果中会出现多余的"Message: "信息头和换行符。